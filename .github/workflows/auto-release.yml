name: auto-release

on:
  release:
    types: [published, edited]

jobs:
  job1:
    runs-on: [ubuntu-latest]
    steps:
      - uses: Actions-R-Us/actions-tagger@latest
        with:
          publish_latest_tag: true
      # - name: printenv
      #   run: env
      - name: show tag
        shell: bash
        run: echo "TAG_ID=$(echo ${{ github.ref }} | awk -F/ '{print $NF}')" >> $GITHUB_ENV
          # TAG_ID=$(echo ${{ github.ref }} | awk -F/ '{print $NF}')
          # echo ${TAG_ID}
          # echo "TAG_ID=${TAG_ID}" >> GITHUB_ENV
      - name: print env
        run: echo $TAG_ID
      - name: Set env
        run: echo "GITHUB_SHA_SHORT=$(echo $GITHUB_SHA | cut -c 1-6)" >> $GITHUB_ENV
      - name: Test
        run: echo $GITHUB_SHA_SHORT
